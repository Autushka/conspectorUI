<div class="cnpContent" layout="column">
	<div layout="row" layout-align="space-between start" class="md-default-theme cnpContentHeader" ng-if="bShowBackButton">
		<div layout="row" layout-align="start start" >
			<div class="notSelectable cnpInputIcon cnpBackIcon" layout="column" layout-align="center start">
				<div ng-if="bShowBackButton" ng-click="onBack()" class="notSelectable cnpLink cnpLinkBackButton">
					{{'global_back' | translate}}
				</div>
			</div>
		</div>
		<div layout="row" layout-align="end start">
			
		</div>
	</div>
	<form name="oForms.deficiencyDetailsForm" novalidate>
		<div layout="row" layout-align="space-between center" class="md-default-theme cnpActionBar">
			<div>
				<md-button ng-show="sMode == 'display' && bDisplayEditButton" class="md-button md-primary md-raised cnpButtonWithIcon cnpInputIcon cnpEditDetailsIconWhite notSelectable" ng-click="onEdit()">{{'global_edit' | translate}}</md-button>
				<md-button ng-show="sMode == 'edit' || sMode == 'create'" type="submit" class="md-button md-primary md-raised cnpButtonWithIcon cnpInputIcon cnpSaveIconWhite cnpButtonMarginRight notSelectable" ng-click="onSave()">{{'global_save' | translate}}</md-button>
				<md-button ng-show="sMode == 'edit' && bDisplayDeleteButton" class="md-button md-primary md-raised cnpButtonWithIcon cnpInputIcon cnpDeleteIconWhite notSelectable " ng-click="onDelete()">{{'global_delete' | translate}}</md-button>
				<md-button ng-show="sMode == 'create'" type="submit" class="md-button md-primary md-raised cnpButtonWithIcon cnpInputIcon cnpPlusIcon notSelectable" ng-click="onSaveAndNew()">{{'global_saveAndNew' | translate}}</md-button>
			</div>
			<div layout="row" layout-align="end start">
				<label class="cnpContentTitle notSelectable">
					{{'deficiencyDetails_title' | translate}}
				</label>
			</div>
		</div>
		<div class="cnpSection" layout="column" layout-align="start center" flex>
			<div class="cnpSubSection" flex>
				<div  class="cnpSubSectionLabel">
					<label>
						{{'deficiencyDetails_associatedProjectsAndPhases' | translate}}
					</label>
				</div>
				<div
					multi-select
					input-model="aUserProjectsPhasesForMultiselect"
					button-label="fullName"
					default-label="{{'global_selectedProjectsAndPhases' | translate }}"
					item-label="name"
					tick-property="ticked"
					group-property="multiSelectGroup"
					is-disabled="sMode == 'display'"
					on-item-click="onSelectedPhasesModified()"
					selection-mode="single"
					helper-elements=""
					output-model="aSelectedPhases"
					on-close="onCloseCheckSelectedPhasesLength()"
					>
				</div>
				<input ng-model="aSelectedPhases.length" type="number" ng-show="false" name="selectedPhases" min="1">
				<div class="cnpErrorMessageValidation" ng-messages="oForms.deficiencyDetailsForm.selectedPhases.$error" ng-if="(oForms.deficiencyDetailsForm.selectedPhases.$dirty && !oForms.deficiencyDetailsForm.selectedPhases.$valid) || submitted">
					<div class="cnpErrorMessageValidationMessage" ng-message="min">{{'global_emptyFieldError' | translate}}</div>
				</div>
			</div>
			<div class="cnpSubSection" flex>
				<div  class="cnpSubSectionLabel">
					<label>
						{{'deficiencyDetails_status' | translate}}
					</label>
				</div>
				<div 
					multi-select
					input-model="aDeficiencyStatuses"
					default-label="{{'deficiencyDetails_deficiencyStatusDefaultLabel' | translate }}"
					button-label="icon name"
					item-label="icon name"
					is-disabled="sMode == 'display'"					
					tick-property="ticked"
					selection-mode="single"
					on-item-click="onSelectedStatusesModified()"					
					output-model="aSelectedStatuses"
					on-close="onCloseCheckSelectedStatusesLength()"										
					helper-elements=""
					>
				</div>
				<input ng-model="aSelectedStatuses.length" type="number" ng-show="false" name="selectedStatuses" min="1">
				<div class="cnpErrorMessageValidation" ng-messages="oForms.deficiencyDetailsForm.selectedStatuses.$error" ng-if="(oForms.deficiencyDetailsForm.selectedStatuses.$dirty && !oForms.deficiencyDetailsForm.selectedStatuses.$valid) || submitted">
					<div class="cnpErrorMessageValidationMessage" ng-message="min">{{'global_emptyFieldError' | translate}}</div>
				</div>
			</div>
			
			<div class="cnpSubSection" flex>
				<div class="cnpSubSectionLabel">
					<label>
						{{'deficiencyDetails_descriptionTags' | translate}}
					</label>
				</div>
				<tags-input
				ng-model="oDeficiency.aDescriptionTags"
				ng-hide="sMode == 'display'"
				replace-spaces-with-dashes="false"
				placeholder="{{'global_addTag' | translate}}"
				on-tag-added="onDataModified()"
				on-tag-removed="onDataModified()">
				</tags-input>
				<div class="tags-wrapper form-control"  ng-show="sMode == 'display'">
					<ul class="tags-list">
						<li class="tag-item" ng-repeat="tag in oDeficiency.aDescriptionTags">
							<span style="padding: 2px;">{{tag.text}}</span>
						</li>
					</ul>
				</div>
			</div>
			<div class="cnpSubSection" flex>
				<div class="cnpSubSectionLabel">
					<label>
						{{'deficiencyDetails_locationTags' | translate}}
					</label>
				</div>
				<tags-input
				ng-model="oDeficiency.aLocationTags"
				ng-hide="sMode == 'display'"
				replace-spaces-with-dashes="false"
				placeholder="{{'global_addTag' | translate}}"
				on-tag-added="onDataModified()"
				on-tag-removed="onDataModified()">
				</tags-input>
				<div class="tags-wrapper form-control"  ng-show="sMode == 'display'">
					<ul class="tags-list">
						<li class="tag-item" ng-repeat="tag in oDeficiency.aLocationTags">
							<span style="padding: 2px;">{{tag.text}}</span>
						</li>
					</ul>
				</div>
			</div>
			<div class="cnpSubSection" flex>
				<div class="cnpSubSectionLabel">
					<label>
						{{'deficiencyDetails_contractors' | translate}}
					</label>
				</div>
					<div
						multi-select
						input-model="aContractors"
						default-label="{{'deficiencyDetails_deficiencyContractorsDefaultLabel' | translate }}"
						button-label="name"
						item-label="name"
						is-disabled="sMode == 'display'"					
						tick-property="ticked"
						on-item-click="onSelectedContractorsModified()"					
						output-model="aSelectedContractors"
						on-close="onCloseCheckSelectedContractorsLength()"										
						helper-elements="filter">
					</div>	
					<input ng-model="aSelectedContractors.length" type="number" ng-show="false" name="selectedContractors" min="1">
					<div class="cnpErrorMessageValidation" ng-messages="oForms.deficiencyDetailsForm.selectedContractors.$error" ng-if="(oForms.deficiencyDetailsForm.selectedContractors.$dirty && !oForms.deficiencyDetailsForm.selectedContractors.$valid) || submitted">
						<div class="cnpErrorMessageValidationMessage" ng-message="min">{{'global_emptyFieldError' | translate}}</div>
					</div>
			</div>

			<div class="cnpSubSection" flex>
				<div class="cnpSubSectionLabel">
					<label>
						{{'deficiencyDetails_dueDate' | translate}}
					</label>
				</div>
				<div class="cnpSubSectionData" ng-if="sMode == 'display'">{{oDeficiency.sDueDate}}</div>
				<input type="text" pick-a-date="oDeficiency.dDueDate" placeholder="Select Date" /> 				
<!-- 				<quick-datepicker ng-if="sMode != 'display'" ng-model='oDeficiency.dDueDate' width="100%"></quick-datepicker> -->
			</div>
			<div layout="row" style="width: 100%" flex>
				<div class="cnpSubSection" flex>
					<div  class="cnpSubSectionLabel">
						<label>
							{{'deficiencyDetails_assignedUser' | translate}}
						</label>
					</div>
					<div
						multi-select
						input-model="aUsers"
						button-label="name"
						default-label="{{'global_assignedUser' | translate }}"
						item-label="name"
						selection-mode="single"
						tick-property="ticked"
						group-property="multiSelectGroup"
						is-disabled="sMode == 'display'"
						on-item-click="onDataModified()"
						output-model="aSelectedUser"
						helper-elements=""
						>
					</div>
					<input ng-model="aSelectedUser.length" type="number" ng-show="false" name="selectedUser" min="1">
					<div class="cnpErrorMessageValidation" ng-messages="oForms.deficiencyDetailsForm.selectedUser.$error" ng-if="(oForms.deficiencyDetailsForm.selectedUser.$dirty && !oForms.deficiencyDetailsForm.selectedUser.$valid) || submitted">
						<div class="cnpErrorMessageValidationMessage" ng-message="min">{{'global_emptyFieldError' | translate}}</div>
					</div>
				</div>
			</div>
			<div layout="row" style="width: 100%" flex>
				<div class="cnpSubSection" flex>
					<div  class="cnpSubSectionLabel">
						<label>
							{{'deficiencyDetails_deficiencyType' | translate}}
						</label>
					</div>
					<div
						multi-select
						input-model="aTaskTypes"
						button-label="name"
						default-label="{{'global_deficiencyType' | translate }}"
						item-label="name"
						selection-mode="single"
						tick-property="ticked"
						group-property="multiSelectGroup"
						is-disabled="sMode == 'display'"
						on-item-click="onDataModified()"
						output-model="aSelectedTaskTypes"
						helper-elements=""
						>
					</div>
					<input ng-model="aSelectedTaskTypes.length" type="number" ng-show="false" name="selectedTaskTypes" min="1">
					<div class="cnpErrorMessageValidation" ng-messages="oForms.deficiencyDetailsForm.selectedTaskTypes.$error" ng-if="(oForms.deficiencyDetailsForm.selectedTaskTypes.$dirty && !oForms.deficiencyDetailsForm.selectedTaskTypes.$valid) || submitted">
						<div class="cnpErrorMessageValidationMessage" ng-message="min">{{'global_emptyFieldError' | translate}}</div>
					</div>
				</div>
			</div>

		</div>
	</form>
</div>
